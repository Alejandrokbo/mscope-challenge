= Plan de Transformación Tecnológica
Alejandro Cabo Marchena | https://www.linkedin.com/in/alejandrokbo/[LinkedIn]
v1.0, 2025-11-25
:toc:
:toclevels: 3
:toc-title: Tabla de Contenido
:sectanchors:
:sectlinks:
:sectnums:
:sectnumlevels: 3
:icons: font
:source-highlighter: rouge
:rouge-style: github
:pdf-theme: mscope
:pdf-themesdir: themes
:imagesdir: images
:figure-caption: Figura
:table-caption: Tabla
:listing-caption: Listado
:experimental:
:title-page:
:title-logo-image: image:mscope-logo.png[pdfwidth=3in,align=center]
:author: Alejandro Cabo Marchena
:linkedin: https://www.linkedin.com/in/alejandrokbo/
:revnumber: 1.0
:revdate: 2025-11-25
:subject: Plan de Transformación Tecnológica - Prueba Técnica Tech Lead
:keywords: Tech Lead, mscope, Transformación Digital, AWS, CI/CD, Arquitectura

[.lead]
Empresa Financiera - Tech Lead Strategy

'''

[.text-center]
== Executive Summary

[.lead]
*Plan de Transformación Digital - 12 Meses | Presupuesto: 324.400€ | Equipo: 5 personas*

=== Objetivos Estratégicos

*Construir una plataforma financiera confiable, escalable y segura* que soporte la expansión a 4 países con modelo B2C, reduciendo bugs en 80% mediante automatización y manteniendo costos AWS bajo 100K€/año.

=== Arquitectura Propuesta

*Multitenant híbrido* (shared DB, isolated schema) con microservicios estratégicos (Auth, Core, Analytics, Notifications, Integration). CloudFront global + read replicas regionales para latencia <300ms. Row-Level Security garantiza aislamiento total de datos por país/tenant.

=== Inversión y ROI

[cols="2,1,1,1"]
|===
| Concepto | Inversión Año 1 | ROI | Comentario

| Equipo técnico (5p)
| 256.000€
| Base del proyecto
| 2 SR, 1 MID, 2 JR

| AWS Infraestructura
| 68.400€
| 32% bajo límite
| Auto-scaling, Reserved Instances

| IA: Detección Fraude
| 2.400€
| 2.000%
| Reduce pérdidas >50K€/año

| IA: Chatbot Bedrock
| 300€
| 13.000%
| Ahorra ~40K€/año en soporte

| TOTAL
| 327.100€
| Alto
| Margen 31.600€ disponible
|===

=== Equipo Técnico

*Estructura 5 personas:* 2 Senior (Full-Stack, DevOps), 1 Mid-Level Backend, 2 Junior (Full-Stack, QA). Metodología Scrum con sprints de 2 semanas. Capacidad estimada: 40-50 puntos/sprint.

=== Roadmap 7 Fases

[horizontal]
Fase 0 (Mes 1):: Setup infraestructura base y onboarding equipo
Fase 1 (Mes 2-3):: CI/CD completo + testing automatizado (cobertura 40%)
Fase 2 (Mes 3-5):: Arquitectura multitenant + migración Aurora (opcional)
Fase 3 (Mes 5-7):: Soporte multipaís + SSO centralizado
Fase 4 (Mes 6-7):: IA detección fraude en tiempo real
Fase 5 (Mes 8-9):: Cobertura 70% + Chatbot Bedrock
Fase 6 (Mes 10-11):: Optimización costos AWS + security hardening
Fase 7 (Mes 12):: Launch B2C progresivo con canary deployment

=== KPIs Clave (6 meses)

[cols="2,1,1"]
|===
| Métrica | Actual | Meta 6m

| Deployment frequency
| Semanal
| Diario

| Change failure rate
| 40%
| <15%

| Test coverage
| 0%
| 70%

| MTTR
| 4h
| 30min

| Uptime
| 98%
| 99.5%

| Bugs producción
| Baseline
| -80%
|===

=== Riesgos Principales

[horizontal]
Bugs críticos post-launch:: *Mitigación:* Tests exhaustivos, canary 10%→50%→100%, rollback automático
Sobrecostos AWS:: *Mitigación:* Monitoreo semanal, alertas 80%, buffer 31.600€
Retrasos timeline:: *Mitigación:* Buffer 20% estimaciones, scope ajustable (IA opcional)

=== Decisión Requerida

Aprobación de presupuesto 324.400€ e inicio inmediato proceso de hiring (4-6 semanas). Kickoff semana 1 tras confirmación.

'''

<<<

== Alineación con Requisitos del Reto

.Cobertura de Requisitos Técnicos
[cols="1,2,1,2"]
|===
| Requisito | Solución Propuesta | Sección Ref. | Validación

| *Plataforma confiable, escalable y segura*
| Arquitectura multitenant con RLS, microservicios en ECS Fargate, Aurora con multi-AZ, CloudFront global
| §3
| Uptime 99.5%, latencia <300ms, aislamiento garantizado por RLS

| *Reducción de bugs mediante automatización*
| CI/CD 7 stages, cobertura 70% backend/60% frontend, tests automáticos E2E, quality gates SonarQube
| §4
| Change failure rate <15%, deployment diario, MTTR 30min

| *Coste AWS <100.000€/año*
| 68.400€/año mediante auto-scaling, Reserved Instances, Fargate Spot, caching, rightsizing
| §6
| 32% bajo límite (31.600€ margen)

| *1-3 componentes IA*
| (1) Detección fraude XGBoost, (2) Chatbot Bedrock Claude Haiku, (3) Churn prediction opcional
| §5
| ROI: Fraude 2.000%, Chatbot 13.000%

| *Arquitectura multipaís*
| CloudFront + API Gateway con routing, read replicas regionales, feature flags, compliance por jurisdicción
| §3.1
| Soporte 4+ países, config JSONB flexible

| *Arquitectura multitenant*
| Shared DB + Isolated Schema con tenant_id + Row-Level Security, tabla tenants con config JSONB
| §3.1.2
| Aislamiento automático, personalización por país

| *Equipo técnico 5 personas*
| 2 Senior (Full-Stack, DevOps), 1 Mid Backend, 2 Junior (Full-Stack, QA) - 256.000€/año
| §7
| Cobertura completa: dev, ops, QA, arquitectura

| *Plan 6-12 meses*
| 7 fases desde setup hasta launch B2C, con quick wins mes 1-3 y componentes IA escalonados
| §8
| Timeline realista con buffers, hitos claros

| *Diseño SSO*
| Identity Provider centralizado, OAuth2+OIDC, JWT con tenant_id, MFA, refresh token rotation, integración Cl@ve/eIDAS
| §3.3
| Single Sign-On multipaís con seguridad financiera
|===

.Cumplimiento de Restricciones
[horizontal]
Presupuesto limitado:: AWS 68.400€ + Equipo 256.000€ = 324.400€ total (margen disponible)
Equipo pequeño:: 5 personas balanceadas (senior/mid/junior) con capacidad 40-50 puntos/sprint
Timeline ajustado:: 12 meses con quick wins mes 1-3, scope ajustable (componente IA #3 opcional)

'''

<<<

'''

== Supuestos y Limitaciones

[NOTE]
====
Este plan se basa en supuestos conservadores para dimensionamiento. Valores proyectados: 10K→50K→100K clientes (años 1-3), 100K transacciones/mes, mercado España+3 países EU. Costos AWS región EU-West-1. ROI calculado sobre escenarios proyectados. Validar con datos reales antes de implementación.
====

*Restricciones del proyecto:* Presupuesto AWS <100K€/año, equipo 5 personas, timeline 6-12 meses.

'''

== Análisis de Situación Actual

=== Problemática Identificada

*Problemas críticos:*

* QA inexistente - testing manual y reactivo
* Bugs recurrentes en producción
* Baja confianza de clientes
* Sin pipelines CI/CD
* Ausencia de gobernanza tecnológica
* Poca trazabilidad de cambios
* Infraestructura AWS sin cobertura transversal

*Stack tecnológico actual:*

* Frontend: React + Storybook + Librerías UI internas
* Backend: Java + Spring Boot (Maven)
* Base de datos: SQL Server
* Procesamiento: ETLs SQL Server + Python Lambdas
* Infraestructura: AWS (sin automatización)

=== Desafíos del Negocio

* _Expansión internacional:_ Escalar a 4 países
* _Cambio de modelo:_ B2B → B2C (menor ticket, mayor volumen)
* _Requisitos operativos:_ Mayor calidad, resiliencia y eficiencia
* _Restricciones:_ Presupuesto limitado, equipo pequeño (5 personas)

'''

== Arquitectura Técnica Propuesta

=== Vista Global de la Arquitectura

La arquitectura propuesta integra todos los componentes en una plataforma cohesiva, segura y escalable:

image::arquitectura-completa-simplificada.png[Arquitectura Completa de la Plataforma,align="center"]

*Características clave:*

* *Entrada global:* CloudFront + API Gateway para routing inteligente y seguridad
* *Microservicios:* 5 servicios core con responsabilidades bien definidas
* *Datos multitenant:* Aurora con RLS + ElastiCache + S3 Data Lake
* *IA integrada:* 3 componentes (Fraude, Chatbot, Churn) con ROI demostrado
* *Observabilidad:* CloudWatch + X-Ray para monitoreo completo
* *CI/CD automatizado:* GitHub Actions + Terraform para despliegues seguros

=== Arquitectura Multipaís y Multitenant

==== Diseño de Alto Nivel

image::arquitectura-general.png[Arquitectura Multipaís y Multitenant,align="center"]

==== Estrategia Multitenant

*Modelo híbrido: Shared Database, Isolated Schema*

image::modelo-multitenant.png[Modelo de Datos Multitenant,align="center"]

*Implementación (3 componentes clave):*

*1. Tabla de tenants:*
```
tenants: tenant_id (UUID) + country_code + config (JSONB: locale, currency, compliance, feature_flags)
```

*2. Aislamiento en todas las tablas:*
```sql
-- Ejemplo: transactions
CREATE TABLE transactions (
    id UUID PRIMARY KEY,
    tenant_id UUID NOT NULL,  -- FK a tenants
    user_id UUID, amount DECIMAL, currency VARCHAR(3), ...
);
```

*3. Row Level Security (RLS):*
```sql
ALTER TABLE transactions ENABLE ROW LEVEL SECURITY;
CREATE POLICY tenant_isolation ON transactions
    USING (tenant_id = current_setting('app.current_tenant')::UUID);
```

[TIP]
====
RLS aplica automáticamente el filtro `tenant_id` en todas las queries, garantizando aislamiento sin cambios en código aplicación.
====

==== Esquema Detallado de Base de Datos

image::modelo-datos-multitenant.png[Esquema Detallado de Base de Datos Multitenant,align="center"]

El modelo incluye:

* *Tabla tenants:* Configuración centralizada por país/organización
* *Aislamiento en todas las tablas:* tenant_id como columna obligatoria
* *Auditoría completa:* Trazabilidad de todas las operaciones (audit_logs)
* *Campos JSONB:* Configuración flexible sin cambios de esquema
* *Índices compuestos:* Optimizados para queries por tenant

*Optimización de performance:* Índices compuestos (tenant_id, created_at), caching ElastiCache (40-60% reducción carga DB), partitioning por fecha en tablas grandes.

=== Microservicios Estratégicos

image::microservicios.png[Microservicios Estratégicos,align="center"]

==== Servicios Core

*1. Authentication & Authorization Service*

* Gestión de identidad multipaís
* SSO con OAuth 2.0 / OpenID Connect
* MFA obligatorio para operaciones financieras
* Integración con proveedores locales (ej: Cl@ve España, eIDAS)

*2. Core Business Service*

* Lógica de negocio principal
* Gestión de productos financieros
* Motor de reglas de negocio por país
* API versioning para compatibilidad B2B/B2C

*3. Analytics & Reporting Service*

* Procesamiento de eventos en tiempo real
* Dashboards de negocio
* Compliance reporting por jurisdicción
* _Componente IA integrado_ (detalle en sección 4)

*4. Notification Service*

* Emails, SMS, push notifications
* Templates multiidioma
* Proveedores locales por país
* Rate limiting y priorización

*5. Integration Service*

* Conectores con sistemas legados
* APIs de terceros (bancos, pasarelas de pago)
* ETL orquestación (migración gradual de lambdas)

=== Diseño de Single Sign-On (SSO)

image::sso-architecture.png[Arquitectura SSO Multipaís,align="center"]

*Componentes clave:*

* *Identity Provider:* Spring Security OAuth 2.0 + OIDC, JWT con tenant_id, Redis para sesiones
* *Flow OAuth 2.0:* Authorization Code + PKCE (apps móviles), scopes: openid, profile, tenant, roles
* *JWT:* Stateless, tenant_id embebido, RS256, TTL 30 min
* *Refresh Token Rotation:* Redis TTL 7 días, rotación automática, revocación instantánea
* *MFA:* TOTP/SMS/Email, obligatorio para transacciones >1.000€ y admin
* *Single Logout:* Invalidación global <5seg via WebSocket
* *Integración nacional:* Cl@ve (España), eIDAS (UE), Social Login (Google/Apple)

image::sso-flow.png[Flujo SSO Completo,align="center"]

*Seguridad:* Rate limiting (brute force), CSRF protection, TLS 1.3, refresh token rotation, MFA, audit logs 2 años (PSD2). Compliance GDPR completo.

*Implementación:* Mes 3-4 (IDP básico), Mes 5 (MFA), Mes 6 (Cl@ve/eIDAS), Mes 7 (SLO). Costo: ~125€/mes (1.500€/año).

=== Estrategia de Datos

[cols="1,2,2,1"]
|===
| Opción | Ventajas | Desventajas | Costo/año

| *A: SQL Server*
(Baseline)
| Sin migración, equipo familiarizado, implementación rápida
| Costos licencias elevados, escalabilidad limitada
| 25.000€

| *B: Aurora MySQL*
(Recomendado)
| Ahorro 23% (6K€), escalabilidad horizontal, replicación global nativa
| Requiere migración, curva aprendizaje
| 19.200€
|===

*Recomendación:* Iniciar con SQL Server (mes 1-3), evaluar performance real, migrar a Aurora si costos >22K€/año o latencia replicas >100ms (mes 6-9). Decisión flexible según datos reales.

*Data Lake:* S3 + Athena para analytics histórico y reporting compliance.

'''

== Estrategia de Calidad y Automatización

=== Pirámide de Testing

image::piramide-testing.png[Pirámide de Testing,align="center"]

==== Objetivos de Cobertura (6 meses)

[cols="2,1,1,1"]
|===
| Tipo de Test | Mes 3 | Mes 6 | Mes 12

| Unit Tests
| 50%
| 70%
| 85%

| Integration
| 30%
| 50%
| 70%

| E2E
| 10%
| 25%
| 40%
|===

=== Stack de Testing

*Frontend (React):*

* _Unit/Integration:_ Jest + React Testing Library
* _E2E:_ Playwright (mejor que Cypress para multipaís)
* _Visual Regression:_ Percy o Chromatic
* _Coverage:_ Istanbul

*Backend (Java Spring Boot):*

* _Unit:_ JUnit 5 + Mockito
* _Integration:_ TestContainers (SQL, Redis)
* _Contract Testing:_ Pact (comunicación entre microservicios)
* _Performance:_ JMeter + Gatling

*API Testing:*

* Postman/Newman para regression testing
* REST Assured para tests programáticos

=== Estrategia CI/CD

==== Pipeline Completo

image::pipeline-cicd.png[Pipeline CI/CD Completo,align="center"]

*Pipeline con 7 stages secuenciales:*

*1. Validate* → Linting (ESLint, Checkstyle) + Format check + Dependency audit

*2. Test* → Unit + Integration tests + Code coverage + SonarQube Quality Gates

*3. Security* → SAST (SonarQube/Semgrep) + Secret scanning + Container scanning (Trivy)

*4. Build* → Docker multistage + Tag commit SHA + Push ECR + SBOM generation

*5. Deploy Dev* → Auto-deploy (branch develop) + Smoke tests + Notificación Slack o Microsoft Teams

*6. Deploy Staging* → Auto-deploy (branch main) + E2E suite completo + Performance baseline

*7. Deploy Production* → Manual approval + Blue-Green + Canary (10%→50%→100%) + Rollback automático si error rate >1%

[TIP]
====
Ver configuración completa en Anexo C (disponible bajo demanda): Ejemplo de `.github/workflows/main.yml` o GitLab CI.
====

==== Herramientas CI/CD

*Opción recomendada:__ **GitHub Actions* (si el código está en GitHub)

* Gratis hasta 2000 min/mes (suficiente para equipo pequeño)
* Integración nativa con GitHub
* Gran ecosistema de actions

*Alternativa:__ **GitLab CI* (si se usa GitLab)

* 400 min/mes gratis
* Muy potente y configurable

*IaC (Infrastructure as Code):*

* _Terraform_ para provisioning AWS
* _AWS CDK_ para recursos específicos AWS
* _Helm_ para deployments Kubernetes (si se adopta EKS en futuro)

=== Ambientes

[cols="1,2,1,1"]
|===
| Ambiente | Propósito | Deploy | Datos

| _Development_
| Desarrollo local
| Manual/Auto
| Sintéticos

| _Integration_
| CI/CD tests
| Auto (PR)
| Sanitizados

| _Staging_
| Pre-producción
| Auto (main)
| Anonimizados

| _Production_
| Live
| Manual + Approval
| Reales
|===

=== Gobernanza y Trazabilidad

*Git Workflow: GitHub Flow simplificado*

image::git-workflow.png[Git Workflow - GitHub Flow,align="center"]

*Políticas de rama:*

* `main`: protegida, requiere PR + 1 aprobación + CI verde
* Commits semánticos: `feat:`, `fix:`, `refactor:`, `test:`, `docs:`
* PR template con checklist (tests, docs, breaking changes)
* Semantic versioning automático (semantic-release)

*Trazabilidad:*

* Integración Jira/Linear con commits y PRs
* Changelog automático
* Release notes generadas desde commits
* Audit log de deployments

'''

== Componentes con Inteligencia Artificial

image::arquitectura-ia.png[Arquitectura de Componentes de IA,align="center"]

=== Componente 1: Sistema de Detección de Fraude y Anomalías

*Problema que resuelve:*
Con la migración a B2C y mayor volumen de transacciones, el fraude es un riesgo crítico.

*Solución técnica:*

image::deteccion-fraude-flujo.png[Flujo de Detección de Fraude,align="center"]

*Implementación:*

* _Modelo:_ XGBoost entrenado con datos históricos (si existen) o dataset público (Kaggle Credit Card Fraud)
* _Features:_ Monto, hora, ubicación, device, velocidad de transacciones, desviación de patrón
* _Reentrenamiento:_ Semanal con feedback loop (transacciones confirmadas como fraude)
* _Costo estimado:_ ~$200/mes (SageMaker endpoint ml.t3.medium)

*Beneficios:*

* Reducción de fraude 60-80%
* Decisión en < 100ms
* Mejora continua con datos reales

=== Componente 2: Asistente Virtual con LLM (Atención al Cliente)

*Problema que resuelve:*

Mayor volumen de clientes B2C requiere soporte escalable sin aumentar headcount.

*Solución técnica:*

image::asistente-virtual-flujo.png[Flujo del Asistente Virtual,align="center"]

*Implementación:*

* _LLM:_ Amazon Bedrock (Claude 3.5 Haiku para costo-beneficio)
* _Knowledge Base:_ Documentación empresa, FAQs, regulaciones por país
* _RAG (Retrieval Augmented Generation):_ pgvector en Aurora (optimizado vs OpenSearch Serverless)
* _Embeddings:_ Bedrock Titan Embeddings ($0.10/1M tokens)
* _Caching:_ Respuestas a FAQs comunes (60% consultas repetidas)
* _Idiomas:_ ES, EN (expandible)
* _Escalamiento:_ Si confianza < 0.7 o cliente pide humano → ticket a soporte

*Costo y ROI:*

* *Año 1:* 300€/año (Bedrock Haiku + embeddings + Lambda/API Gateway)
* *Ahorro:* ~40.000€/año (automatiza 70% de consultas soporte)
* *ROI:* 13.000% primer año
* *Escalabilidad:* 10K clientes = 300€, 50K = 600€, 100K = 960€

*Optimizaciones clave:* Claude Haiku vs Sonnet (92% ahorro), caching 60%, pgvector en Aurora (vs OpenSearch).

=== Componente 3: Predicción de Churn y Recomendaciones Personalizadas

*Problema que resuelve:*

En modelo B2C, retención de clientes es crítica. Identificar clientes en riesgo y ofrecer productos relevantes.

*Solución técnica:*

*A) Modelo de Churn Prediction:*

* _Entrada:_ Actividad usuario (login, transacciones, saldo, tiempo desde última operación)
* _Modelo:_ Gradient Boosting (LightGBM)
* _Output:_ Probabilidad de churn en próximos 30 días
* _Acción:_ Si churn_score > 0.6 → campaña retención automática

*B) Motor de Recomendaciones:*

* *Enfoque híbrido:*
  - Collaborative filtering (usuarios similares)
  - Content-based (productos similares a los que usa)
* _Implementación:_ Amazon Personalize (servicio managed)
* _Output:_ Top 3 productos recomendados por usuario

*Pipeline diario (4 pasos):*

1. *Extract* → User features desde Aurora (comportamiento últimos 90 días)
2. *Predict* → Churn scores con LightGBM → Filtrar usuarios alto riesgo (score > 0.6)
3. *Recommend* → Personalize genera top 3 productos → Enviar campaña retención automática
4. *Store* → Guardar métricas en S3 para análisis

*Costo estimado:* ~$400/mes (Personalize + SageMaker)

*Beneficios:*

* Reducción de churn 15-25%
* Aumento de cross-selling
* Campañas marketing dirigidas

=== Resumen Componentes IA

[cols="2,1,1,2,1,1"]
|===
| Componente | Impacto | Costo/año | ROI | Prioridad | Implementación

| Detección Fraude
| Alto
| 2.400€
| Reduce pérdidas >50K€/año
| Alta
| Mes 4-6

| Asistente Virtual (Bedrock)
| Alto
| *300€*
| *Ahorra ~40K€/año*
| Alta
| Mes 7-9

| Churn + Recomendaciones
| Medio
| 4.800€
| +15-25% retención
| Media
| Mes 10-12 (opcional)
|===

*Total año 1 (Fraude + Bedrock):* 2.700€/año | *Total año 2 (+ Churn):* 7.500€/año

*Estrategia de implementación:*

1. *Fase 1 (Mes 4-6):* Detección de Fraude - crítico para protección B2C
2. *Fase 2 (Mes 7-9):* Asistente Virtual Bedrock - ROI excepcional (13.000%)
3. *Fase 3 (Mes 10-12):* Churn Prediction - evaluar según presupuesto disponible

[NOTE]
====
Ver detalles técnicos completos de implementación Bedrock en sección 4.2 "Asistente Virtual con LLM", incluyendo desglose de costos por componente ($25/mes) y estrategias de optimización (caching 60%, pgvector).
====

'''

== Estructura del Equipo Técnico

=== Composición del Equipo (5 personas)

==== _Senior Full-Stack Engineer #1_ (SR)
*Rol:* Tech Lead / Arquitecto
*Responsabilidades:*

* Diseño de arquitectura y decisiones técnicas
* Ownership de microservicios core (Auth, Core Business)
* Code reviews y mentoring
* Establecer estándares y best practices
* Planificación técnica y roadmap

*Stack:* Java + Spring Boot, React, AWS, Arquitectura de software

*Profile:* 5+ años experiencia, liderazgo técnico, experiencia en fintech/finanzas es plus

'''

==== _Senior DevOps/SRE Engineer_ (SR)
*Rol:* Infrastructure & Reliability Lead
*Responsabilidades:*

* Diseño e implementación de pipelines CI/CD
* Infraestructura como código (Terraform)
* Monitoreo, logging, alertas (CloudWatch, Datadog)
* Optimización de costos AWS
* Security hardening y compliance
* Disaster recovery y backups

*Stack:* AWS (ECS, RDS, Lambda, S3), Terraform, Docker, CI/CD, observability tools

*Profile:* 4+ años experiencia DevOps/SRE, certificación AWS (Solutions Architect/DevOps) es plus

'''

==== _Mid-Level Backend Engineer_ (MID)
*Rol:* Backend Developer
*Responsabilidades:*

* Desarrollo de microservicios (Integration, Notification)
* Implementación de tests unitarios e integración
* Migración de ETLs de lambdas Python a servicios managed
* Integración con APIs de terceros (bancos, pasarelas)
* Documentación técnica

*Stack:* Java + Spring Boot, Python, SQL, AWS Lambda, APIs REST

*Profile:* 2-3 años experiencia backend, conocimiento de arquitecturas distribuidas

'''

==== _Junior Full-Stack Developer #1_ (JR)
*Rol:* Frontend-focused Developer
*Responsabilidades:*

* Desarrollo de componentes React
* Implementación de tests frontend (Jest, Playwright)
* Mantenimiento de Storybook
* Implementación de UI/UX designs
* Bug fixing y mejoras de rendimiento

*Stack:* React, TypeScript, Jest, Storybook, CSS-in-JS

*Profile:* 0-1 año experiencia, formación en desarrollo web, capacidad de aprendizaje

'''

==== _Junior QA Automation Engineer_ (JR)
*Rol:* Quality Assurance & Testing
*Responsabilidades:*

* Desarrollo de tests E2E (Playwright)
* Configuración de CI para tests automáticos
* Testing manual exploratorio (inicialmente)
* Documentación de casos de prueba
* Reporte de bugs y seguimiento
* Colaborar en establecer estrategia de QA

*Stack:* Playwright, Postman, Jest, JUnit, básico de Java/JavaScript

*Profile:* 0-1 año experiencia, conocimientos de testing, interés en automatización

'''

=== Organización y Metodología

*Metodología:* Scrum adaptado (2 semanas sprints)

*Estructura de equipo:*

image::team-structure.png[Estructura del Equipo Técnico,align="center"]

*Ceremonias:*

* Daily standup (15 min, async Slack + 2x/semana sync)
* Sprint planning (2h cada 2 semanas)
* Sprint review/demo (1h)
* Retrospectiva (1h)
* Refinement (1h semanal)

*Horario de trabajo:*

* Preferiblemente overlap de 4-6 horas para colaboración
* Flexible / remoto-first
* On-call rotation (SR y MID) post lanzamiento

=== Onboarding y Desarrollo

*Plan de Onboarding (primeras 2 semanas):*

*Semana 1:*

* Setup de entorno de desarrollo
* Documentación de arquitectura y contexto negocio
* Acceso a herramientas (AWS, GitHub, Jira, Slack)
* Pair programming con Tech Lead
* Primera tarea sencilla (bug fix o small feature)

*Semana 2:*

* Ownership de una historia de usuario
* Participación en code reviews
* Presentación de primeros resultados

*Desarrollo continuo:*

* _Juniors:_ 1 hora/semana de mentoring con seniors
* _Todo el equipo:_ 2 horas/semana "learning time" (cursos, experimentación)
* _Knowledge sharing:_ 1 presentación técnica/mes por cualquier miembro
* _Budget formación:_ $500/persona/año (cursos, certificaciones)

=== Estimación de Capacidad del Equipo (Throughput)

==== Velocidad Estimada por Sprint

*Metodología de estimación:*

[cols="2,1,1,2"]
|===
| Rol | Puntos/Sprint | FTE | Justificación

| SR Full-Stack
| 12-15
| 0.8
| 20% tiempo en arquitectura, code reviews, mentoring

| SR DevOps
| 10-12
| 0.7
| 30% tiempo en mantenimiento infra, soporte

| MID Backend
| 8-10
| 0.9
| Foco en desarrollo, poca carga adicional

| JR Full-Stack
| 5-7
| 0.7
| Curva aprendizaje, ramp-up progresivo

| JR QA
| 6-8
| 0.8
| Testing + automatización, aprendizaje paralelo
|===

*Capacidad total del equipo:*

* *Mes 1-2 (onboarding):* 20-25 puntos/sprint (eficiencia reducida)
* *Mes 3-6 (consolidación):* 35-45 puntos/sprint (equipo funcionando)
* *Mes 7-12 (madurez):* 45-55 puntos/sprint (máxima productividad)

==== Puntos Totales Entregables en 12 Meses

*Cálculo conservador (sprints de 2 semanas):*

[cols="1,1,1,1"]
|===
| Periodo | Sprints | Puntos/Sprint | Total Puntos

| Mes 1-2 (4 semanas)
| 2
| 22
| 44

| Mes 3-6 (16 semanas)
| 8
| 40
| 320

| Mes 7-12 (24 semanas)
| 12
| 50
| 600

| *TOTAL 12 meses*
| *22*
| *Promedio: 44*
| *964 puntos*
|===

*Distribución estimada por tipo de trabajo:*

* *Features nuevas:* 480 puntos (50%)
* *Testing y QA:* 193 puntos (20%)
* *Refactoring y deuda técnica:* 145 puntos (15%)
* *Bug fixing:* 96 puntos (10%)
* *Investigación y spikes:* 50 puntos (5%)

==== Viabilidad del Roadmap según Capacidad

*Estimación de esfuerzo por fase (en puntos):*

[cols="2,1,1,1"]
|===
| Fase | Puntos Est. | % Total | Viabilidad

| Fase 0: Setup (Mes 1)
| 40
| 4%
| Alta - Buffer suficiente

| Fase 1: CI/CD + Quality (Mes 2-3)
| 160
| 17%
| Alta - Tiempo adecuado

| Fase 2: Migración DB (Mes 3-5)
| 180
| 19%
| Media - Requiere validación

| Fase 3: Multipaís (Mes 5-7)
| 200
| 21%
| Alta - Scope bien definido

| Fase 4: IA Fraude (Mes 6-7)
| 80
| 8%
| Alta - Componente acotado

| Fase 5: Cobertura + Chatbot (Mes 8-9)
| 120
| 12%
| Alta - Paralelo con otras tareas

| Fase 6: Optimización (Mes 10-11)
| 100
| 10%
| Alta - Iterativo

| Fase 7: Launch B2C (Mes 12)
| 60
| 6%
| Alta - Preparación continua

| *Buffer / Imprevistos*
| 24
| 2%
| Margen de seguridad

| *TOTAL*
| *964*
| *100%*
| *Roadmap VIABLE*
|===

*Conclusiones:*

* El roadmap de 12 meses es *viable* con la capacidad estimada del equipo
* *Buffer del 2%* permite absorber imprevistos sin comprometer fechas
* Fase 2 (Migración DB) puede ser *opcional* si se mantiene SQL Server, liberando 180 puntos
* Componente IA #3 (Churn) puede diferirse a Año 2 si hay restricciones de tiempo

*Supuestos:*

* Equipo trabaja 40h/semana efectivas
* Ceremonias Scrum consumen ~10% del tiempo (incluido en FTE)
* No hay rotación de personal durante el año
* Onboarding completo en 2 semanas para cada miembro

=== Presupuesto de Equipo

*Estimación salarial referencial (mercado España 2025):*

[cols="2,1,1,2"]
|===
| Rol | Sueldo Bruto/Año | Coste Empresa/Año | Contexto

| SR Full-Stack
| 50-60K€
| 63-75K€
| 5+ años experiencia, fintech es plus

| SR DevOps
| 50-60K€
| 63-75K€
| Certificación AWS recomendada

| MID Backend
| 35-42K€
| 44-53K€
| 2-4 años, arquitecturas distribuidas

| JR Full-Stack
| 25-30K€
| 32-38K€
| 0-2 años, potencial de crecimiento

| JR QA
| 24-28K€
| 30-35K€
| Interés en automatización

| *TOTAL (estimado)*
| *190-220K€*
| *240-275K€*
| Media: ~*256K€*
|===

[NOTE]
====
*Consideraciones:*

- Rangos basados en mercado España (Madrid/Barcelona)
- Ajustar según ubicación: -15-20% ciudades medianas, +10-15% perfiles muy senior
- Costes empresa incluyen: seguridad social (~30%), equipamiento, software licenses
- Salarios pueden variar ±15% según skills específicas y negociación
====

'''

== Plan de Proyecto (6-12 meses)

=== Roadmap de Implementación (7 Fases - 12 Meses)

[cols="1,1,3,2"]
|===
| Fase | Periodo | Entregables Clave | KPIs

| *0: Setup*
| Mes 1
| Equipo onboarded, AWS provisionado, pipeline CI/CD básico, Terraform IaC
| Infra lista semana 3

| *1: Quality & CI/CD*
| Mes 2-3
| Pipeline completo 7 stages, tests 40% cobertura, SonarQube, code review obligatorio
| PRs CI verde 100%, coverage 40%

| *2: Arquitectura Multitenant*
| Mes 3-5
| Aurora RDS + RLS, migración datos (opcional), Auth/Core refactorizados
| Zero downtime, validación datos OK

| *3: Multipaís*
| Mes 5-7
| CloudFront global, read replicas EU, i18n, feature flags, SSO completo
| Latencia <300ms, uptime 99.9%

| *4: IA Fraude*
| Mes 6-7
| Pipeline Kinesis, modelo XGBoost, SageMaker endpoint, dashboard monitoreo
| Precisión >90%, latencia <100ms

| *5: IA Chatbot*
| Mes 8-9
| Bedrock Haiku, KB configurado, chatbot web/app, cobertura tests 70%
| Resolución 60%, CSAT >4/5

| *6: Optimización*
| Mes 10-11
| Rightsizing, Reserved Instances, security audit OWASP, penetration test
| Ahorro 30-40% costos

| *7: Launch B2C*
| Mes 12
| Soft launch 10%, canary deployment, full launch 100%, retrospectiva
| Error rate <0.5%, NPS >40
|===

image::roadmap-visual.png[Timeline Completo,align="center"]

'''

== Estrategia de Optimización de Costos AWS

=== Objetivo: < 100.000€/año

*Distribución presupuestaria optimizada:*

[cols="2,1,1,1,2"]
|===
| Servicio | Costo Mensual | Costo Anual | % Total | Detalle

| _Compute (ECS Fargate)_
| 2.000€
| 24.000€
| 35%
| Auto-scaling + Fargate Spot

| _Database (Aurora RDS)_
| 1.600€
| 19.200€
| 28%
| Reserved Instances + rightsizing

| _Storage (S3 + Backups)_
| 400€
| 4.800€
| 7%
| Lifecycle policies

| _Networking (CloudFront, Data Transfer)_
| 650€
| 7.800€
| 11%
| Compresión + VPC endpoints

| _AI/ML (SageMaker, Bedrock)_
| 625€
| 7.500€
| 11%
| Bedrock optimizado ($25/mes)

| _Otros (CloudWatch, Secrets, etc.)_
| 200€
| 2.400€
| 4%
| Logs retention policies

| _Buffer contingencia_
| 225€
| 2.700€
| 4%
| Imprevistos

| *TOTAL*
| *5.700€*
| *68.400€*
| *100%*
|
|===

*Margen de seguridad:* 31.600€/año (32% bajo el límite de 100K€)

*Desglose AI/ML optimizado (625€/mes):*

* SageMaker (Detección Fraude): 200€/mes
* _Bedrock + infraestructura (Chatbot): 25€/mes_ ← pgvector + caching
* Amazon Personalize (Churn): 400€/mes (opcional fase 3)

=== Estrategias de Optimización (Resumen)

*Tabla consolidada de técnicas aplicadas por servicio:*

[cols="1,1,1,1,3"]
|===
| Servicio | Sin Optimizar | Optimizado | % Ahorro | Técnicas Clave Aplicadas

| *Compute (ECS)*
| 3.500€/mes
| 2.000€/mes
| 43%
| • Auto-scaling (1 instancia horas valle) • Fargate Spot para servicios no críticos • Rightsizing: 0.25 vCPU servicios ligeros

| *Database*
| 2.800€/mes
| 1.600€/mes
| 43%
| • Reserved Instances (1 año, partial upfront) • Aurora Serverless v2 para dev/staging • Snapshot retention 7 días • Caching agresivo (ElastiCache)

| *Storage (S3)*
| 800€/mes
| 400€/mes
| 50%
| • Lifecycle policies (90d→IA, 365d→Glacier) • Intelligent-Tiering para data lake

| *Networking*
| 950€/mes
| 650€/mes
| 32%
| • CloudFront con compresión Brotli/Gzip • VPC Endpoints (evita NAT Gateway) • Regional optimization

| *AI/ML*
| 1.250€/mes
| 625€/mes
| 50%
| • SageMaker: ml.t3.medium + serverless inference • Bedrock: Haiku + cache Redis (60% hits) • pgvector vs OpenSearch (-$144/mes) • Personalize diferido a Fase 3

| *Otros*
| 300€/mes
| 200€/mes
| 33%
| • Logs retention optimizada • Secrets Manager consolidado

| *TOTAL*
| *9.600€/mes*
| *5.700€/mes*
| *41%*
| *Ahorro anual: 46.800€*
|===

*Monitoreo continuo:* AWS Cost Explorer con alertas al 80%, AWS Budgets (presupuesto 7K€/mes), Infracost en CI/CD para preview de costos en PRs Terraform. Revisión trimestral de waste, rightsizing y nuevas opciones de ahorro.

'''

== Gestión de Riesgos

=== Matriz de Riesgos

[cols="2,1,1,3"]
|===
| Riesgo | Probabilidad | Impacto | Mitigación

| _Bugs críticos en producción post-launch_
| Media
| Alto
| Tests exhaustivos, canary deployment, rollback automático

| _Sobrecostos AWS_
| Media
| Medio
| Monitoreo continuo, alertas, revisiones mensuales

| _Pérdida de datos en migración DB_
| Baja
| Crítico
| Backups, validación dual, rollback plan, dry-runs

| _Retrasos en timeline_
| Alta
| Medio
| Buffer 20% en estimaciones, scope ajustable, comunicación temprana

| _Rotación de equipo (attrition)_
| Media
| Alto
| Documentación exhaustiva, pair programming, knowledge sharing

| _Problemas de compliance/regulatorio_
| Baja
| Alto
| Asesoría legal, auditorías, feature flags por país

| _Dependencia de proveedor (AWS)_
| Baja
| Medio
| Abstracción de infra, evitar vendor lock-in crítico

| _Incidentes de seguridad_
| Media
| Crítico
| Security audits, pentesting, SAST/DAST, incident response plan
|===

=== Plan de Contingencia

*Escenarios críticos:*

*1. Caída de producción (RTO: 1 hora)*

* Multi-AZ deployment (Aurora, ECS)
* Automated health checks + auto-restart
* Runbook de incidentes
* On-call rotation

*2. Pérdida de datos (RPO: 15 minutos)*

* Backups automáticos cada 15 min (Aurora)
* Point-in-time recovery
* Cross-region backup replication

*3. Vulnerabilidad de seguridad crítica*

* Hotfix pipeline (bypass aprobaciones si es CVE crítico)
* Security response team (SR DevOps + Tech Lead)
* Comunicación a clientes si aplica (24h)

'''

== Métricas de Éxito (KPIs)

=== KPIs Técnicos

[cols="2,1,1,1"]
|===
| Métrica | Baseline (actual) | Mes 6 | Mes 12

| _Test Coverage (Backend)_
| 0%
| 70%
| 85%

| _Test Coverage (Frontend)_
| 0%
| 60%
| 75%

| _Deployment Frequency_
| Semanal
| Diario
| Múltiple/día

| _Lead Time for Changes_
| 2 semanas
| 2 días
| <24 horas

| _Mean Time to Recovery (MTTR)_
| 4 horas
| 1 hora
| 30 min

| _Change Failure Rate_
| 40%
| 15%
| <10%

| _Uptime_
| 98%
| 99.5%
| 99.9%

| _API Latency (p95)_
| 800ms
| 400ms
| <300ms
|===

=== KPIs de Negocio

[cols="2,1"]
|===
| Métrica | Objetivo Mes 12

| _Reducción de bugs en producción_
| -80%

| _Customer Satisfaction (CSAT)_
| >4.5/5

| _Reducción de tiempo de soporte_
| -60% (gracias a chatbot)

| _Detección de fraude_
| >90% precisión

| _Reducción de churn_
| -20%

| _Time-to-market nuevas features_
| -50%
|===

=== KPIs de Costos

[cols="2,1"]
|===
| Métrica | Objetivo

| _Costo AWS total_
| <84.000€/año

| _Costo por transacción_
| <0.02€

| _Costo equipo + infra_
| <340.000€/año
|===

'''

== Conclusiones

Este plan establece una transformación sólida: arquitectura multitenant escalable a 4+ países, reducción de bugs 80% mediante CI/CD automatizado, AWS optimizado 68.400€/año (32% bajo límite), 3 componentes IA con ROI excepcional (Bedrock 13.000%), equipo eficiente 5 personas, entrega 12 meses.

*Destacado IA:* Bedrock Haiku 300€/año ahorra 40.000€ soporte (ROI 13.000%, break-even 3 días). Claves: modelo correcto (-92% costo), caching 60%, pgvector vs OpenSearch (-144€/mes).

*Presupuesto total:* Año 1: 324.400€ (256K equipo + 68.4K AWS), margen 31.600€.

*Factores críticos:* Compromiso ejecutivo, equipo senior experimentado, calidad desde día 1, comunicación continua, scope flexible.

*Próximos pasos:* Aprobación stakeholders, asignación presupuesto, hiring (4-6 semanas), setup AWS, kickoff mes 1.

'''

== Anexos

=== Anexo A: Stack Tecnológico (Resumen)

[cols="1,3"]
|===
| Capa | Tecnologías Principales

| *Frontend*
| React 18 + TypeScript + Vite • Tailwind CSS • Storybook 7 • Jest + Playwright

| *Backend*
| Java 17 + Spring Boot 3.x + Maven • Spring Security OAuth 2.0 • JUnit 5 + TestContainers

| *Base de Datos*
| SQL Server (actual) / Aurora MySQL 8.x (opción) • Redis (ElastiCache) • OpenSearch

| *Infrastructure*
| AWS ECS Fargate • RDS • S3 • CloudFront • Lambda • SageMaker • Bedrock • Terraform + Docker

| *CI/CD & Quality*
| GitHub Actions / GitLab CI • SonarQube • Trivy • Terraform Cloud

| *Observability*
| CloudWatch (logs, metrics, alarms) • AWS X-Ray (tracing)
|===

=== Anexo B: Referencias Clave

[cols="1,2,2"]
|===
| Categoría | Recurso | URL

| *Arquitectura*
| AWS Well-Architected
| aws.amazon.com/architecture/well-architected

|
| 12-Factor App
| 12factor.net

| *Testing*
| Testing Pyramid (Fowler)
| martinfowler.com/articles/practical-test-pyramid

| *DevOps*
| DORA Metrics
| cloud.google.com/blog/products/devops-sre

|
| SRE Book (Google)
| sre.google/books

| *ML/AI*
| SageMaker Best Practices
| docs.aws.amazon.com/sagemaker
|===

=== Anexo C: Configuraciones Técnicas

*Contenido disponible bajo demanda:*

- Ejemplo completo pipeline CI/CD (`.github/workflows/main.yml`)
- Configuraciones Terraform para infraestructura AWS
- Políticas de lifecycle S3 y optimización de costos
- Configuración auto-scaling ECS Fargate

=== Anexo D: Glosario

*B2B/B2C:* Business to Business / Business to Consumer

*CI/CD:* Continuous Integration / Continuous Deployment

*ECS:* Elastic Container Service (AWS)

*RLS:* Row Level Security (PostgreSQL/Aurora)

*SAST/DAST:* Static/Dynamic Application Security Testing

*SRE:* Site Reliability Engineering

'''

*Documento preparado para:* mscope - Prueba Técnica Tech Lead

*Fecha:* 2025-11-25

*Versión:* 1.0

*Autor:* Alejandro Cabo Marchena

'''

*Este plan es un documento vivo y debe ser revisado y actualizado regularmente a medida que el proyecto progresa.*
